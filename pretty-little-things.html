<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400..800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./assets/css/pretty.css">
</head>

<body>
  <h1 id="categoryTitle" style="display:none"></h1>
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid" style="justify-content: flex-start;">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation" style=" border: 0; ">
        <span class="navbar-toggler-icon"></span>
      </button>
      <a class="navbar-brand" href="#" style=" width: 100%; max-width: 150px; ">
        <svg aria-label="Pretty Little Thing" style="height:inherit;width:inherit;display:inline-block" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 164.7 18.9"><path fill="#222" d="M0 .2h4c1.5 0 2.5.3 3.4 1.3.9 1 1.2 2.1 1.2 4.3 0 1.6-.1 2.7-.8 3.7-.7 1.2-1.8 2-3.8 2H2.7v7.2H0V.2zM2.7 9H4c2.2 0 2.2-1.3 2.2-3.1 0-1.7 0-3.2-2.1-3.2H2.7V9z"></path><path fill="#231F20" d="M10.6.2h4.3c3.2 0 4.7 1.8 4.7 5.4 0 2.1-.6 3.7-2.3 4.6l2.9 8.5h-2.8l-2.5-7.9h-1.6v7.9h-2.7V.2zm2.7 8.2h1.5c1.8 0 2.1-1 2.1-2.9s-.3-2.9-2.3-2.9h-1.4v5.8z"></path><path fill="#222" d="M21.9.2h7.9v2.5h-5.3v5.4h4.6v2.5h-4.6V16h5.3v2.7h-7.9V.2zM34.5 2.7h-3.1V.2h8.8v2.5h-3.1v16h-2.7v-16zM45 2.7h-3.1V.2h8.8v2.5h-3.1v16H45v-16zM55.5 10.9L51.8.2h2.8l2.1 7.4h.1L59 .2h2.8l-3.6 10.7v7.8h-2.7v-7.8zM63.7.2h2.7V16h5.3v2.7h-7.9V.2zM73.4.2H76v18.5h-2.7V.2zM80.4 2.7h-3.1V.2h8.8v2.5H83v16h-2.7v-16zM90.6 2.7h-3.1V.2h8.8v2.5h-3.1v16h-2.7v-16zM97.7.2h2.7V16h5.3v2.7h-7.9V.2zM107.4.2h7.9v2.5H110v5.4h4.6v2.5H110V16h5.3v2.7h-7.9V.2zM120.2 2.7h-3.1V.2h8.8v2.5h-3.1v16h-2.7v-16zM127.4.2h2.7v7.9h3.3V.2h2.7v18.5h-2.7v-8.3H130v8.3h-2.7V.2zM138.6.2h2.7v18.5h-2.7V.2zM144.1.2h2.6l4 11.2h.1V.2h2.7v18.5H151l-4.1-11.1h-.1v11.1h-2.7V.2zM155.8 4.5c0-3 2.3-4.5 4.5-4.5s4.5 1.5 4.5 4.5v.9H162v-.9c0-1.3-.8-1.9-1.8-1.9s-1.8.6-1.8 1.9v9.8c0 1.3.8 1.9 1.8 1.9s1.8-.6 1.8-1.9v-3.5h-2.1V8.5h4.8v5.8c0 3-2.3 4.5-4.5 4.5s-4.5-1.5-4.5-4.5V4.5z"></path></svg>
      </a>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-link active" aria-current="page" href="#">Home</a>
          <a class="nav-link" href="#">Features</a>
          <a class="nav-link" href="#">Pricing</a>
          <a class="nav-link disabled" aria-disabled="true">Disabled</a>
        </div>
      </div>
    </div>
  </nav>
  <div id="productsContainer" class="container mt-4"></div>
  
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      function getParameterByName(name) {
        const url = window.location.href;
        const nameRegex = name.replace(/[\[\]]/g, '\\$&');
        const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
        const results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
      }

      const category = getParameterByName('category');
      if (category) {
        document.getElementById('categoryTitle').textContent = 'Category: ' + category;
        loadProducts(category);
      }

      function loadProducts(category) {
        const jsonFilePath = `./assets/fakeData/${category}.json`;
        fetch(jsonFilePath)
          .then(response => response.json())
          .then(data => {
            displayProducts(data.products);
          })
          .catch(error => {
            console.error('Error loading JSON:', error);
          });
      }

      function displayProducts(products) {
        const productsContainer = document.getElementById('productsContainer');
        productsContainer.innerHTML = ''; // Clear previous products
        products.forEach(product => {
          const productCard = `
            <a href="pretty-little-things-product.html?category=${category}&id=${product.id}" class="text-decoration-none">
              <div class="card mb-4">
                <div class="card-body">
                  <h5 class="card-title">${product.name}</h5>
                  <img src="${product.gallery[0].url}" alt="${product.gallery[0].alt}" class="img-thumbnail" style="max-width: 150px;">
                  <p><strong>Price:</strong> $${product.pricing.sale_price.toFixed(2)} <del>$${product.pricing.regular_price.toFixed(2)}</del></p>
                  <p><strong>Colors:</strong> ${product.colors.map(color => color.name).join(', ')}</p>
                </div>
              </div>
            </a>
          `;
          productsContainer.innerHTML += productCard;
        });
      }
    });
  </script>
</body>

</html>
